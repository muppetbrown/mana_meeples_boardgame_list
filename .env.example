# Mana & Meeples Board Game Library - Environment Variables
# Copy this file to .env.local and fill in your actual values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database URL - PostgreSQL (production) or SQLite (local dev)
# PostgreSQL format: postgresql://username:password@host:port/database
# SQLite format: sqlite:///./app.db
DATABASE_URL=postgresql://username:password@host:port/database

# Optional: Read replica for improved performance (production only)
# Separates read operations from write operations
# READ_REPLICA_URL=postgresql://username:password@read-replica-host:port/database

# ============================================================================
# DATABASE PERFORMANCE TUNING (Sprint 9 Optimizations)
# ============================================================================

# Connection pool - recycle every 15 minutes (prevents stale connections)
# Default: 900 seconds (15 minutes) - safe for PostgreSQL on Render
DB_POOL_RECYCLE=900

# Connection pool sizing (optional - defaults work for most deployments)
# DB_POOL_SIZE=15           # Permanent connections
# DB_MAX_OVERFLOW=20        # Burst capacity
# DB_POOL_TIMEOUT=30        # Wait timeout in seconds

# Slow query logging threshold (seconds)
# Queries slower than this will be logged for monitoring
# Default: 1.0 second
SLOW_QUERY_THRESHOLD_SECONDS=1.0

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# Admin token for protected endpoints
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ADMIN_TOKEN=your-secure-admin-token-here

# JWT session secret (for signing tokens)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=your-secure-session-secret-here

# JWT token expiration (days)
# Default: 7 days
JWT_EXPIRATION_DAYS=7

# Session timeout (seconds)
# Default: 3600 seconds (1 hour)
SESSION_TIMEOUT_SECONDS=3600

# Rate limiting configuration
# RATE_LIMIT_ATTEMPTS=5     # Max attempts before rate limit
# RATE_LIMIT_WINDOW=300     # Window in seconds (5 minutes)
# DISABLE_RATE_LIMITING=false

# ============================================================================
# ENVIRONMENT & DEPLOYMENT
# ============================================================================

# Environment: production, development, or staging
# CRITICAL: Set to "production" to disable localhost CORS origins
ENVIRONMENT=production

# Public API base URL (for absolute URLs and image proxying)
PUBLIC_BASE_URL=https://mana-meeples-boardgame-list.onrender.com

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://manaandmeeples.co.nz,https://www.manaandmeeples.co.nz,https://library.manaandmeeples.co.nz

# Python version (Render deployment)
PYTHON_VERSION=3.11.9

# Thumbnails storage directory
THUMBS_DIR=/var/data/thumbs

# ============================================================================
# REDIS SESSION STORAGE (Sprint 8 - Horizontal Scaling)
# ============================================================================

# Redis connection URL
# Local: redis://localhost:6379/0
# Render: redis://red-xxx:6379 (from Render dashboard)
# REDIS_URL=redis://localhost:6379/0

# Enable/disable Redis (falls back to in-memory if disabled)
# REDIS_ENABLED=true

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================

# BoardGameGeek API Key (required for BGG data sync)
# Sign up at https://boardgamegeek.com/wiki/page/BGG_XML_API2
BGG_API_KEY=your-bgg-api-key-here

# Cloudinary CDN Configuration (optional - for image optimization)
# Sign up at https://cloudinary.com for free account
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
# CLOUDINARY_ENABLED will auto-detect if credentials are set

# GitHub Token (optional - for workflow automation)
# GITHUB_TOKEN=ghp_xxx
# GITHUB_REPO_OWNER=your-username
# GITHUB_REPO_NAME=your-repo-name

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Sentry DSN (optional - for error tracking)
# Sign up at https://sentry.io
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# ============================================================================
# PERFORMANCE & CACHING
# ============================================================================

# In-memory cache TTL (seconds)
# Default: 30 seconds
# CACHE_TTL_SECONDS=30

# Cache freshness threshold (0.0-1.0)
# Serve from cache without refresh check if age < threshold * TTL
# Default: 0.9 (90% of TTL)
# CACHE_FRESH_THRESHOLD=0.9

# HTTP client configuration
# HTTP_TIMEOUT=30           # HTTP request timeout (seconds)
# HTTP_RETRIES=3            # Number of retries for failed requests

# ============================================================================
# DEVELOPMENT ONLY
# ============================================================================

# Skip admin token warning in CI/CD environments
# SKIP_ADMIN_WARNING=false

# Save debug info for BGG data extraction
# SAVE_DEBUG_INFO=false
